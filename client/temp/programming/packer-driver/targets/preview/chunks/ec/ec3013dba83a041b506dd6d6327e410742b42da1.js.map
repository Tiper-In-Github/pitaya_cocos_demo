{"version":3,"sources":["file:///Users/even/workspace/github/pitaya_cocos_demo/client/assets/scripts/net/http/Http.ts"],"names":["Http","Post","url","req","Promise","reslove","reject","xhr","XMLHttpRequest","open","responseType","setRequestHeader","onload","response","console","log","readyState","status","resp","Uint8Array","send"],"mappings":";;;iBAEaA,I;;;;;;;;;;;;;;;;;sBAAAA,I,GAAN,MAAMA,IAAN,CAAW;AAEU,eAAJC,IAAI,CAACC,GAAD,EAAcC,GAAd,EAAwB;AAAA;AAC5C,mBAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACpC,kBAAIC,GAAG,GAAG,IAAIC,cAAJ,EAAV;AACAD,cAAAA,GAAG,CAACE,IAAJ,CAAS,MAAT,EAAiBP,GAAjB,EAAsB,IAAtB;AACAK,cAAAA,GAAG,CAACG,YAAJ,GAAmB,aAAnB,CAHoC,CAGF;;AAClCH,cAAAA,GAAG,CAACI,gBAAJ,CAAqB,cAArB,EAAqC,sBAArC,EAJoC,CAI0B;;AAC9DJ,cAAAA,GAAG,CAACK,MAAJ,GAAcC,QAAD,IAAc;AACvBC,gBAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBR,GAAG,CAACM,QAA5B;;AACA,oBAAIN,GAAG,CAACS,UAAJ,IAAkB,CAAlB,IAAuBT,GAAG,CAACU,MAAJ,IAAc,GAAzC,EAA8C;AAC1C,sBAAIC,IAAI,GAAG,IAAIC,UAAJ,CAAeZ,GAAG,CAACM,QAAnB,CAAX;AACAR,kBAAAA,OAAO,CAACa,IAAD,CAAP;AACH,iBAHD,MAGO;AACHZ,kBAAAA,MAAM;AACT;AACJ,eARD;;AASAC,cAAAA,GAAG,CAACa,IAAJ,CAASjB,GAAT;AACH,aAfM,CAAP;AAD4C;AAiB/C;;AAnBa,O","sourcesContent":["\n\nexport class Http {\n\n    public static async Post(url: string, req: any) {\n        return new Promise((reslove, reject) => {\n            let xhr = new XMLHttpRequest();\n            xhr.open(\"post\", url, true);\n            xhr.responseType = \"arraybuffer\"; // 坑点！\n            xhr.setRequestHeader(\"Content-Type\", \"application/protobuf\"); //坑点！\n            xhr.onload = (response) => {\n                console.log(\"response\", xhr.response);\n                if (xhr.readyState == 4 && xhr.status == 200) {\n                    let resp = new Uint8Array(xhr.response);\n                    reslove(resp)\n                } else {\n                    reject()\n                }\n            };\n            xhr.send(req);\n        })\n    }\n}"]}