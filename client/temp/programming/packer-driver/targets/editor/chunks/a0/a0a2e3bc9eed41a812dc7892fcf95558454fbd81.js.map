{"version":3,"sources":["file:///Users/even/workspace/github/pitaya_cocos_demo/client/assets/scripts/net/http/Http.ts"],"names":["Http","Post","url","req","Promise","reslove","reject","xhr","XMLHttpRequest","open","responseType","setRequestHeader","onload","response","console","log","readyState","status","resp","Uint8Array","send"],"mappings":";;;iBAEaA,I;;;;;;;;;;;;;sBAAAA,I,GAAN,MAAMA,IAAN,CAAW;AAEU,qBAAJC,IAAI,CAACC,GAAD,EAAcC,GAAd,EAAwB;AAC5C,iBAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACpC,gBAAIC,GAAG,GAAG,IAAIC,cAAJ,EAAV;AACAD,YAAAA,GAAG,CAACE,IAAJ,CAAS,MAAT,EAAiBP,GAAjB,EAAsB,IAAtB;AACAK,YAAAA,GAAG,CAACG,YAAJ,GAAmB,aAAnB,CAHoC,CAGF;;AAClCH,YAAAA,GAAG,CAACI,gBAAJ,CAAqB,cAArB,EAAqC,sBAArC,EAJoC,CAI0B;;AAC9DJ,YAAAA,GAAG,CAACK,MAAJ,GAAcC,QAAD,IAAc;AACvBC,cAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBR,GAAG,CAACM,QAA5B;;AACA,kBAAIN,GAAG,CAACS,UAAJ,IAAkB,CAAlB,IAAuBT,GAAG,CAACU,MAAJ,IAAc,GAAzC,EAA8C;AAC1C,oBAAIC,IAAI,GAAG,IAAIC,UAAJ,CAAeZ,GAAG,CAACM,QAAnB,CAAX;AACAR,gBAAAA,OAAO,CAACa,IAAD,CAAP;AACH,eAHD,MAGO;AACHZ,gBAAAA,MAAM;AACT;AACJ,aARD;;AASAC,YAAAA,GAAG,CAACa,IAAJ,CAASjB,GAAT;AACH,WAfM,CAAP;AAgBH;;AAnBa,O","sourcesContent":["\n\nexport class Http {\n\n    public static async Post(url: string, req: any) {\n        return new Promise((reslove, reject) => {\n            var xhr = new XMLHttpRequest();\n            xhr.open(\"post\", url, true);\n            xhr.responseType = \"arraybuffer\"; // 坑点！\n            xhr.setRequestHeader(\"Content-Type\", \"application/protobuf\"); //坑点！\n            xhr.onload = (response) => {\n                console.log(\"response\", xhr.response);\n                if (xhr.readyState == 4 && xhr.status == 200) {\n                    let resp = new Uint8Array(xhr.response);\n                    reslove(resp)\n                } else {\n                    reject()\n                }\n            };\n            xhr.send(req);\n        })\n    }\n}"]}